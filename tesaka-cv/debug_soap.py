import os
os.environ["SIFEN_EMISOR_RUC"] = "4554737-8"

from app.sifen_client.soap_client import SoapClient
from app.sifen_client.config import SifenConfig
import lxml.etree as etree

# Payload con namespace por defecto
payload = '<rEnvioLote xmlns="http://ekuatia.set.gov.py/sifen/xsd"><dId>202601181622163</dId><xDE>UEsDBBQAAAAAAMiCMlyTuh+LNx8AADcfAAAMAAAAeG1sX2ZpbGUueG1sPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48ckxvdGVERT48ckxvdGVERSB4bWxucz0iaHR0cDovL2VrdWF0aWEuc2V0Lmdvdi5weS9zaWZlbi94c2QiPjxyREUgSWQ9InJERTAxODAwNDU1NDczNzAxMDAxMDAwMDAwMTIwMjYwMTE4MTEzMjI0MTIzNDU2Nzg5Ij48ZFZlckZvcj4xNTA8L2RWZXJGb3I+PERFIElkPSIwMTgwMDQ1NTQ3MzcwMTAwMTAwMDAwMDEyMDI2MDExODExMzIyNDEyMzQ1Njc4OSI+PGREVklkPjE8L2REVklkPjxkRmVjRmlybWE+MjAyNi0wMS0xOFQxMTozMjoyNC4xNTk5NTM8L2RGZWNGaXJtYT48ZFNpc0ZhY3Q+MTwvZFNpc0ZhY3Q+PGdPcGVERT48aVRpcEVtaT4xPC9pVGlwRW1pPjxkRGVzVGlwRW1pPk5vcm1hbDwvZERlc1RpcEVtaT48ZENvZFNlZz4wMDAwMDAwMjM8L2RDb2RTZWc+PGRJbmZvRW1pPjE8L2RJbmZvRW1pPjxkSW5mb0Zpc2M+SW5mb3JtYWNpw7NuIGRlIGludGVyw6lzIGRlbCBGaXNjbyByZXNwZWN0byBhbCBERTwvZEluZm9GaXNjPjwvZ09wZURFPjxnVGltYj48aVRpREU+MTwvaVRpREU+PGREZXNUaURFPkZhY3R1cmEgZWxlY3Ryw7NuaWNhPC9kRGVzVGlERT48ZE51bVRpbT4xMjM0NTY3ODwvZE51bVRpbT48ZEVzdD4wMDE8L2RFc3Q+PGRQdW5FeHA+MDAxPC9kUHVuRXhwPjxkTnVtRG9jPjEwMDAwNTA8L2ROdW1Eb2M+PGRTZXJpZU51bT5BQjwvZFNlcmllTnVtPjxkRmVJbmlUPjIwMTktMDgtMTM8L2RGZUluaVQ+PC9nVGltYj48Z0RhdEdyYWxPcGU+PGRGZUVtaURFPjIwMjYtMDEtMThUMTE6MzI6MjQuMTU5OTc1PC9kRmVFbWlERT48Z09wZUNvbT48aVRpcFRyYT4xPC9pVGlwVHJhPjxkRGVzVGlwVHJhPlZlbnRhIGRlIG1lcmNhZGVyw61hPC9kRGVzVGlwVHJhPjxpVEltcD4xPC9pVEltcD48ZERlc1RJbXA+SVZBPC9kRGVzVEltcD48Y01vbmVPcGU+UFlHPC9jTW9uZU9wZT48ZERlc01vbmVPcGU+R3VhcmFuaTwvZERlc01vbmVPcGU+PC9nT3BlQ29tPjxnRW1pcz48ZFJ1Y0VtPjQ1NTQ3Mzc8L2RSdWNFbT48ZERWRW1pPjg8L2REVkVtaT48aVRpcENvbnQ+MjwvaVRpcENvbnQ+PGNUaXBSZWc+MzwvY1RpcFJlZz48ZE5vbUVtaT5JbmR1c3RyaWFzIEZlcmlzIFMuQS48L2ROb21FbWk+PGREaXJFbWk+Q0FMTEUgMSBDQVNJIENBTExFIDI8L2REaXJFbWk+PGROdW1DYXM+MDwvZE51bUNhcz48Y0RlcEVtaT4xPC9jRGVwRW1pPjxkRGVzRGVwRW1pPkNBUElUQUw8L2REZXNEZXBFbWk+PGNDaXVFbWk+MTwvY0NpdUVtaT48ZERlc0NpdUVtaT5BU1VOQ0lPTiAoRElTVFJJVE8pPC9kRGVzQ2l1RW1pPjxkVGVsRW1pPjAxMjEyMzQ1NjwvZFRlbEVtaT48ZEVtYWlsRT5jb3JyZW9AY29ycmVvLmNvbTwvZEVtYWlsRT48Z0FjdEVjbz48Y0FjdEVjbz40NjUxMDwvY0FjdEVjbz48ZERlc0FjdEVjbz5DT01FUkNJTyBERSBDRVJUSUZJQ0FETyBERSBOSVZFTCBERSBDRVJUSUZJQ0FETyBERSBDRVJUSUZJQ0FETyBERSBOSVZFTCA8L2Rlc0FjdEVjbz48Z0FjdEVjbz48Y0FjdEVjbz4wMDwvY0FjdEVjbz48ZERlc0FjdEVjbz5TRVJWSUNJT1MgREUgQ0xBVkFET1JJQSBERSBDRVJUSUZJQ0FETyBERSBDRVJUSUZJQ0FETyBERSBDRVJUSUZJQ0FETyBERU5JVkVMPC9kZXNBY3RFY28+PC9nQWN0RWNvPjxnRGF0UmVjPjxkRGF0UmVjPjAyMDEyMzQ1NjwvZERhdFJlYz48ZERDb2RDbGllbnRlPkFBQTwvZERDb2RDbGllbnRlPjwvZ0RhdFJlYz48L2dEYXRHcmFsT3BlPjxnRHRpcERFPjxnQ2FtRkU+PGlJbmRQcmVzPjE8L2lJbmRQcmVzPjxkRGVzSW5kUHJlcz5PcGVyYWNpw7NuIHByZXNlbmNpYWw8L2REZXNJblByZXM+PC9nQ2FtRkU+PGdDYW1Db25kPjxpQ29uZE9wZT4yPC9pQ29uZE9wZT48ZERDb25kT3BlPkNyw6lkaXRvPC9kRENvbmRPcGU+PGdQYWdDcmVkPjxpQ29uZENyZWQ+MTwvaUNvbmRDcmVkPjxkRENvbmRDcmVkPlBsYXpvPC9kRENvbmRDcmVkPjxkUGxhem9DcmU+Mjg8L2RQbGF6b0NyZT48L2dQYWdDcmVkPjwvZ0NhbUNvbmQ+PGdDYW1JdGVtPjxkQ29kSW50PkNBQy9DVEFDPC9kQ29kSW50PjxkRGVzUHJvU2VyPkNVRU5UQVMgQUNUSVZBUzwvZERlc1Byb1Nlcj48Y1VuaU1lZD43NzwvY1VuaU1lZD48ZERlc1VuaU1lZD5VTkk8L2REZXNVbmlNZWQ+PGRDYW50UHJvU2VyPjE8L2RDYW50UHJvU2VyPjxkSW5mSXRlbT4yMTwvZEluZkl0ZW0+PGdWYWxvckl0ZW0+PGRQVW5pUHJvU2VyPjExMDAwMDA8L2RQVW5pUHJvU2VyPjxkVG90QnJ1T3BlSXRlbT4xMTAwMDAwPC9kVG90QnJ1T3BlSXRlbT48Z1ZhbG9yUmVzdGFJdGVtPjxkRGVzY0l0ZW0+MDwvZERlc2NJdGVtPjxkUG9yY0Rlc0l0PjA8L2RQb3JjRGVzSXQ+PGREZXNjR2xvSXRlbT4wPC9kRGVzY0dsb0l0ZW0+PGRUb3RPcGVJdGVtPjExMDAwMDA8L2RUb3RPcGVJdGVtPjwvZ1ZhbG9yUmVzdGFJdGVtPjwvZ1ZhbG9ySXRlbT48Z0NhbUlWQT48aUFmZWNJVkE+MTwvaUFmZWNJVkE+PGREZXNBZmVjSVZBPkdyYXZhZG8gSVZBPC9kRGVzQWZlY0lWQT48ZFByb3BJVkE+MTAwPC9kUHJvcElWQT48ZFRhc2FJVkE+MTA8L2RUYXNhSVZBPjxkQmFzR3JhdklWQT4xMDAwMDAwPC9kQmFzR3JhdklWQT48ZExpcUlWQUl0ZW0+MTAwMDAwPC9kTGlxSVZBSXRlbT48L2dDYW1JVkE+PC9nQ2FtSXRlbT48L2dEdGlwREU+PGdUb3RTdWI+PGRTdWJFeGU+MDwvZFN1YkV4ZT48ZFN1YkV4bz4wPC9kU3ViRXhvPjxkU3ViNT4wPC9kU3ViNT48ZFN1YjEwPjIyMDAwMDA8L2RTdWIxMD48ZFRvdE9wZT4yMjAwMDAwPC9kVG90T3BlPjxkVG90RGVzYz4wPC9kVG90RGVzYz48ZFRvdERlc2NHbG90ZW0+MDwvZFRvdERlc2NHbG90ZW0+PGRUb3RBbnRJdGVtPjA8L2RUb3RBbnRJdGVtPjxkVG90QW50PjA8L2RUb3RBbnQ+PGRQb3JjRGVzY1RvdGFsPjA8L2RQb3JjRGVzY1RvdGFsPjxkRGVzY1RvdGFsPjAuMDwvZERlc2NUb3RhbD48ZEFudGljaXBvPjA8L2RBbnRpY2lwbz48ZFJlZG9uPjAuMDwvZFJlZG9uPjxkVG90R3JhbE9wZT4yMjAwMDAwPC9kVG90R3JhbE9wZT48ZElWQTU+MDwvZElWQTU+PGRJVkExMD4yMDAwMDA8L2RJVkExMD48ZFRvdElWQT4yMDAwMDA8L2RUb3RJVkE+PGRCYXNlR3JhdjU+MDwvZEJhc2VHcmF2NT48ZEJhc2VHcmF2MTA+MjAwMDAwMDwvZEJhc2VHcmF2MTA+PGRUQmFzR3JhSVZBPjIwMDAwMDA8L2RUQmFzR3JhSVZBPjwvZ1RvdFN1Yj48L0RFPjxTaWduYXR1cmUgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiPjxTaWduZWRJbmZvPjxDYW5vbmljYWxpemF0aW9uTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jIi8+PFNpZ25hdHVyZU1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZHNpZy1tb3JlI3JzYS1zaGEyNTYiLz48UmVmZXJlbmNlIFVSST0iIzAxODAwNDU1NDczNzAxMDAxMDAwMDAwMTIwMjYwMTE4MTEzMjI0MTIzNDU2Nzg5Ij48VHJhbnNmb3Jtcz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmUiLz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jIi8+PC9UcmFuc2Zvcm1zPjxEaWdlc3RNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGVuYyNzaGEyNTYiLz48RGlnZXN0VmFsdWU+bnpMVW51VUpvdTMwVUNsaUt6dk9oTWdQMEdPRDVyVWFkVDFWTEVoUktBZz08L0RpZ2VzdFZhbHVlPjwvUmVmZXJlbmNlPjwvU2lnbmVkSW5mbz48U2lnbmF0dXJlVmFsdWU+YVUwbktjZzJpV1NvUVFTbkEvV3BKS2JZdGovb1Q3SHkxSUZsMFRhcDRzOUFKWlNMOHlGYWswVG9EVWRuclNWTkw3d2J5L09mdFdCRmxuVXh3T3JBU0ZncVI0UXNoMW9MS1FOTkdMdHh5MjZXMDRmeGVBOVI2dzdHMElqejE0eHEvRTU4cDNnaXN0bGE5dVVUbExhUTZYYUtFQTlPQ3RqSUxKMUxWV1ZKMTJUcDJQaW5XSG51T0xIL01LbXBvajlNNUN3WE1jTTBBM3ZTMlVhZUJkdFRoV3hTb2J1Q0lRS2p5Z1Ava29CUUJMNjJ4eng5aHpKNjE0U3FOREliVXM0LzQwMlRCNlovWUk5MVVVVVd1cXhsK0dqZWtyd1dPT1Nxa0JVbHR1Mkg5NzRJZ0p5ZnI5UjFibTdlcDc4dm9zZzZoOHRmQkZiTEVIVy9iTzMrL28wcjd3PT08L1NpZ25hdHVyZVZhbHVlPjxLZXlJbmZvPjxYNTA5RGF0YT48WDUwOUNlcnRpZmljYXRlPk1JSUlzRENDQnBpZ0F3SUJBZ0lJQWRhREZ3LzY3aFl3RFFZSktvWklodmNOQVFFTEJRQXdXakVhTUJnR0ExVUVBd3dSUTBFdFJFOURWVTFGVGxSQklGTXVRUzR4RmpBVUJnTlZCQVVURFZKVlF6Z3dNRFV3TVRjeUxURXhGekFWQmdOVkJBb01Ea1JQUTFWTlJVNVVRU0JUTGtFdU1Rc3dDUVlEVlFRR0V3SlFXVEFlRncweU5URXlNamt4TXpVd01EQmFGdzB5TmpFeU1qa3hNelV3TURCYU1JR3hNU1F3SWdZRFZRUUREQnROUVZKRFNVOGdVbFZDUlU0Z1JrVlNTVk1nUVVkVlNVeEZVa0V4RWpBUUJnTlZCQVVUQ1VOSk5EVTFORGN6TnpFVk1CTUdBMVVFS2d3TVRVRlNRMGxQSUZKVlFrVk9NUmN3RlFZRFZRUUVEQTVHUlZKSlV5QkJSMVZKVEVWU1FURUxNQWtHQTFVRUN3d0NSakV4S3pBcEJnTlZCQW9NSWtORlVsUkpSa2xEUVVSUElFTlZRVXhKUmtsRFFVUlBJRlJTU1VKVlZFRlNTVTh4Q3pBSkJnTlZCQVlUQWxCWk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBbmk2TlY0bVdwY2RwWkZzUHdqYmxCaWZrMmpXa1R2WUFqRjF6NFpubUNGUEZqK0ptRE1KcHRmUlJ4cWlRYWh5d2FLUVUrRXpJRldLVFZ1UkV2TXAwK01WNVhTaWs1STl3U2h5QnlCdHZEclJ6RmxtWXlBaFFLbWJYTTE2M1JMNEVHSWd6M2dIYk1MVk1xUkJFbkJmcFkreUpXTS9HcG9Ia0ZsRWxlelk0WGk1WFVzQW1KVVZDNG1OdVp6d1RSNmxkUDBJdERSYnI3SXB3QjBPd3o4VDdDdkNQNWVPeCtQYWUzdGZ3VmorS0haRFU5YlpHV3QyK3hVbjRiOVBOMWtIWFRSTlhvd1Nlb2pvVHZQZUNtQklWNVB4NzU1YXdPRGM0cVdTQzE1YmNRbWxtZUdzWGxuampURklFZGV5T0NueHV5b010dlpYNysrcGw3dzRBUlV2aHdRSURBUUFCbzRJRUlEQ0NCQnd3REFZRFZSMFRBUUgvQkFJd0FEQWZCZ05WSFNNRUdEQVdnQlNoUFlVcnpkZ3NsaDg1QWd5ZlV6dFkySlVMZXpDQmxBWUlLd1lCQlFVSEFRRUVnWWN3Z1lRd1ZRWUlLd1lCQlFVSE1BS0dTV2gwZEhCek9pOHZkM2QzTG1ScFoybDBieTVqYjIwdWNIa3ZkWEJzYjJGa2N5OWpaWEowYVdacFkyRmtieTFrYjJOMWJXVnVkR0V0YzJFdE1UVXpOVEV4TnpjM01TNWpjblF3S3dZSUt3WUJCUVVITUFHR0gyaDBkSEJ6T2k4dmQzZDNMbVJwWjJsMGJ5NWpiMjB1Y0hrdmIyTnpjQzh3Z1pJR0ExVWRFUVNCaWpDQmg0RVphblZzYVdGbGJXOXVaMlZ6WVRneVFHZHRZV2xzTG1OdmJhUnFNR2d4S1RBbkJnTlZCQTBNSUVaSlVrMUJJRVZNUlVOVVVrOU9TVU5CSUdSbElHNXBkbVZzSUcxbFpHbHZNUlV3RXdZRFZRUUZFd3hTVlVNME5UVTBOek0zTFRneEpEQWlCZ05WQkFvTUcwMUJVa05KVHlCU1ZVSkZUaUJHUlZKSlV5QkJSMVZKVEVWU1FUQ0NBZVVHQTFVZElBU0NBZHd3Z2dIWU1JSUIxQVlOS3dZQkJBR0MrVHNCQVFFTUFUQ0NBY0V3THdZSUt3WUJCUVVIQWdFV0kyaDBkSEJ6T2k4dmQzZDNMbVJwWjJsMGJ5NWpiMjB1Y0hrdlpHVnpZMkZ5WjJGek1JSUJqQVlJS3dZQkJRVUhBZ0l3Z2dGK0hvSUJlZ0JEQUdVQWNnQjBBR2tBWmdCcEFHTUFZUUJrQUc4QUlBQmpBSFVBWVFCc0FHa0FaZ0JwQUdNQVlRQmtBRzhBSUFCa0FHVUFJQUJtQUdrQWNnQnRBR0VBSUFCbEFHd0FaUUJqQUhRQWNnRHpBRzRBYVFCakFHRUFJQUIwQUdrQWNBQnZBQ0FBUmdBeEFDQUFLQUJqQUd3QVlRQjJBR1VBY3dBZ0FHVUFiZ0FnQUcwQTh3QmtBSFVBYkFCdkFDQUFjd0J2QUdZQWRBQjNBR0VBY2dCbEFDa0FMQUFnQUhNQWRRQnFBR1VBZEFCaEFDQUFZUUFnQUd3QVlRQnpBQ0FBWXdCdkFHNEFaQUJwQUdNQWFRQnZBRzRBWlFCekFDQUFaQUJsQUNBQWRRQnpBRzhBSUFCbEFIZ0FjQUIxQUdVQWN3QjBBR0VBY3dBZ0FHVUFiZ0FnQUd3QVlRQWdBRVFBWlFCakFHd0FZUUJ5QUdFQVl3QnBBUE1BYmdBZ0FHUUFaUUFnQUZBQWNnRGhBR01BZEFCcEFHTUFZUUJ6QUNBQVpBQmxBQ0FBUXdCbEFISUFkQUJwQUdZQWFRQmpBR0VBWXdCcEFQTUFiZ0FnQUdRQVpRQWdBRVFBVHdCREFGVUFUUUJGQUU0QVZBQkJBQ0FBVXdBdEFFRUFMakFxQmdOVkhTVUJBZjhFSURBZUJnZ3JCZ0VGQlFjREFnWUlLd1lCQlFVSEF3UUdDQ3NHQVFVRkJ3TUJNSHNHQTFVZEh3UjBNSEl3TktBeW9EQ0dMbWgwZEhCek9pOHZkM2QzTG1ScFoybDBieTVqYjIwdWNIa3ZZM0pzTDJSdlkzVnRaVzUwWVY5allTNWpjbXd3T3FBNG9EYUdOR2gwZEhCek9pOHZkM2QzTG1SdlkzVnRaVzUwWVM1amIyMHVjSGt2WkdsbmFYUnZMMlJ2WTNWdFpXNTBZVjlqWVM1amNtd3dIUVlEVlIwT0JCWUVGSHZyeFFkN2FQU0p1V2tRc2dvY2J4ekdva3FDTUE0R0ExVWREd0VCL3dRRUF3SUY0REFOQmdrcWhraUc5dzBCQVFzRkFBT0NBZ0VBa3NuRHlLYkxFTTVUaFdzRkZaS2lvUmVaM3FBYmZHbGVER3JBT3poVitNcExDRzJ3dnlrR0Z5VjRTQTdqYmppaHcraWhNdVhjb3hKYkY1MGNCVFp4UmNSVElRSHdMejNlaTN1WTdtSk1ZeVd1YTFLZEZqdlgrczgwWkdqNjYrT2NaNXp3dE1rcU5mYW5weEx5WEtQYVFDM3QvTTd5ZWIvdWVTSFZ2UUFQdUhabVMzT0VnQ1VIMUdET0lZbWE0Y3BENWZkeFcyNzc5UHdOajBueE4rTTlqR1RqRUZzWFVZMkJzYXlFakNzTFE2bHBzRGtSV2g3dHA2T0c0WXZ6eCtHMWFKbzBLUUFWWWF2ZEZUeVREKzRXR0pHa2Y5ZmlqeTlMRHBxd2tOSk9ldk4vZk9NN0kvQktDMW9KN3ZaT0szRHhueXB3alhpY1o1UjRxaVJIamhFRVVnRlh3bDJuQzkvYWZyaWw0eG52SmVwSFErby92c3FTUmoxTUFrM3d4aHBDd2F4WGVlSTBKbFpnenk3OFlndXRZVHlpaXNETDFuaEUyMWRNRmhXVE1OcTY5RTM4V01zZ081S090NHFwNER2Y1N0VHBrdFp3RzVtMEYzZHh1VkRTcE9WUmw2K3kwcWFFWXZzVXBWSUM0OW5zdDFySFBSMkZpbjVsbUN3dE8rcTJSbnd1SWhqQW92SFpMcUhtdkhSV1VUZkduRXVyTldqQnhvNC9rUWhwT3I2K3FUZjRKM1g4UCtxZ3kybkFaNndGdFlTZnNNS3pXMGl3VTdPaHZBNGFhSkNBQUV1dTkvTDhVRmh2WVFITHFLcnI4MWZWQXU4eml5RFhZUWNBeDh0UlhZVk05QVFSek1tcTA0KzEyTDdtWStXLzVBR1B5T0dlUDdEdTFIMTN0RlU9PC9YNTA5Q2VydGlmaWNhdGU+PFg1MDlTdWJqZWN0TmFtZT5zZXJpYWxOdW1iZXI9UlVDNDU1NDczNy04LEM9UFksTz1DRVJUSUZJQ0FETyBDVUFMSUZJQ0FETyBUUklCVVRBUklPLE9VPUYxLDIuNS40LjQ9RkVSSVMgQUdVSUxFUkEsMi41LjQuNDI9TUFSQ0lPIFJVQkVOLDIuNS40LjU9Q0k0NTU0NzM3LENOPU1BUkNJTyBSVUJFTiBGRVJJUyBBR1VJTEVSQTwvWDUwOVN1YmplY3ROYW1lPjxYNTA5SXNzdWVyU2VyaWFsPjxYNTA5SXNzdWVyTmFtZT5DPVBZLE89RE9DVU1FTlRBIFMuQS4sMi41LjQuNT1SVUM4MDA1MDE3Mi0xLENOPUNBLURPQ1VNRU5UQSBTLkEuPC9YNTA5SXNzdWVyTmFtZT48WDUwOVNlcmlhbE51bWJlcj4xMzI0MzczNzQxMjk1OTc5NzQ8L1g1MDlTZXJpYWxOdW1iZXI+PC9YNTA5SXNzdWVyU2VyaWFsPjwvWDUwOURhdGE+PC9LZXlJbmZvPjwvU2lnbmF0dXJlPjxnQ2FmRnVGRD48ZERlc1RyaWI+MTA8L2REZXNUcmliPjwvZ0NhbUZ1RkQ+PC9yREU+PC9yTG90ZURFPjwvckxvdGVERT5QSwECFAAKAAAAAABHlTJck7ofizcfAAA3HwAADAAAAAAAAAAAAAAAAAAAAAAAeG1sX2ZpbGUueG1sUEsFBgAAAAABAAEAOgAAAGEfAAAAAA==</xDE></rEnvioLote>'

print("Payload de entrada:")
print(payload[:200] + "...")
ns_str = 'xmlns="http://ekuatia.set.gov.py/sifen/xsd"'
print(f"\nContiene {ns_str}: {ns_str in payload}")

# Simular lo que hace send_recibe_lote
root = etree.fromstring(payload.encode("utf-8"))
print(f"\nRoot tag: {root.tag}")
print(f"Root nsmap: {root.nsmap}")

# Extraer dId y xDE
def _extract_text(elem, tag):
    ns = {"s": "http://ekuatia.set.gov.py/sifen/xsd"}
    found = elem.find(f".//s:{tag}", namespaces=ns)
    if found is not None:
        return found.text
    # Sin namespace
    found = elem.find(f".//{tag}")
    if found is not None:
        return found.text
    return None

dId_val = _extract_text(root, "dId")
xDE_val = _extract_text(root, "xDE")

print(f"\ndId extraído: {dId_val[:20] if dId_val else None}...")
print(f"xDE extraído: {'(presente)' if xDE_val else None}")
