    <!DOCTYPE HTML>
    <html>
     <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <style>
        .navbar__local {
          flex-grow: 1;
          display: grid;
          grid-auto-flow: column;
          grid-auto-columns: 1fr min-content 1fr;
          margin: 0;
          height: 100%;
          
          .navbar__item {
            align-content: center;
          }
          .navbar__link {
            display: inline;
          }
          .search {
            text-align: center;
          }
          .next {
            text-align: right;
          }
        }
      </style>
      <title>Open database</title>
      <link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

     </head>
     <body class="docs">    <div class="navbar navbar-fixed-top">
      <div class="navbar__inner clearfix">
          <ul class="navbar__local">
            <li class="navbar__item prev"><a href="function.dba-nextkey.html" class="navbar__link">« dba_nextkey</a></li>
            <li class="navbar__item search">
              <!-- Desktop encanced search -->
              <button
                id="navbar__search-button"
                class="navbar__search-button"
                hidden
              >
                    <svg
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden="true"
        width="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
    >
    <circle cx="11" cy="11" r="8"></circle>
    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
                Search
              </button>
            </li>
            <li class="navbar__item next"><a href="function.dba-optimize.html" class="navbar__link">dba_optimize »</a></li>
          </ul>
      </div>
    </div>    <div id="breadcrumbs" class="clearfix">
      <ul class="breadcrumbs-container">
        <li><a href="index.html">PHP Manual</a></li>
        <li><a href="ref.dba.html">DBA Functions</a></li>
        <li>Open database</li>
      </ul>
    </div>    <div id="layout">
      <div id="layout-content"><div id="function.dba-open" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">dba_open</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">dba_open</span> &mdash; <span class="dc-title">Open database</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.dba-open-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>dba_open</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$path</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$mode</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><span class="type"><a href="language.types.null.html" class="type null">?</a></span><span class="type"><a href="language.types.string.html" class="type string">string</a></span></span> <code class="parameter">$handler</code><span class="initializer"> = <strong><code><a href="reserved.constants.html#constant.null">null</a></code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$permission</code><span class="initializer"> = 0644</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$map_size</code><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><span class="type"><a href="language.types.null.html" class="type null">?</a></span><span class="type"><a href="language.types.integer.html" class="type int">int</a></span></span> <code class="parameter">$flags</code><span class="initializer"> = <strong><code><a href="reserved.constants.html#constant.null">null</a></code></strong></span></span><br>): <span class="type"><span class="type"><a href="class.dba-connection.html" class="type Dba\Connection">Dba\Connection</a></span>|<span class="type"><a href="language.types.singleton.html" class="type false">false</a></span></span></div>

  <p class="simpara">
   <span class="function"><strong>dba_open()</strong></span> establishes a database instance for
   <code class="parameter">path</code> with <code class="parameter">mode</code> using
   <code class="parameter">handler</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.dba-open-parameters">
  <h3 class="title">Parameters</h3>
  <dl>
   
    <dt><code class="parameter">path</code></dt>
    <dd>
     <span class="simpara">
      Commonly a regular path in your filesystem.
     </span>
    </dd>
   
   
    <dt><code class="parameter">mode</code></dt>
    <dd>
     <span class="simpara">
      It is <code class="literal">r</code> for read access, <code class="literal">w</code> for
      read/write access to an already existing database, <code class="literal">c</code>
      for read/write access and database creation if it doesn&#039;t currently exist,
      and <code class="literal">n</code> for create, truncate and read/write access.
      The database is created in BTree mode, other modes (like Hash or Queue)
      are not supported.
     </span>
     <span class="simpara">
      Additionally you can set the database lock method with the next char.
      Use <code class="literal">l</code> to lock the database with a <var class="filename">.lck</var>
      file or <code class="literal">d</code> to lock the databasefile itself. It is
      important that all of your applications do this consistently.
     </span>
     <span class="simpara">
      If you want to test the access and do not want to wait for the lock
      you can add <code class="literal">t</code> as third character. When you are
      absolutely sure that you do not require database locking you can do
      so by using <code class="literal">-</code> instead of <code class="literal">l</code> or
      <code class="literal">d</code>. When none of <code class="literal">d</code>,
      <code class="literal">l</code> or <code class="literal">-</code> is used, dba will lock
      on the database file as it would with <code class="literal">d</code>.
     </span>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       There can only be one writer for one database file. When you use dba on
       a web server and more than one request requires write operations they can
       only be done one after another. Also read during write is not allowed.
       The dba extension uses locks to prevent this. See the following table:
       <table class="doctable table">
        <caption><strong>DBA locking</strong></caption>
        
         <thead>
          <tr>
           <th>already open</th>
           <th><code class="parameter">mode</code> = &quot;rl&quot;</th>
           <th><code class="parameter">mode</code> = &quot;rlt&quot;</th>
           <th><code class="parameter">mode</code> = &quot;wl&quot;</th>
           <th><code class="parameter">mode</code> = &quot;wlt&quot;</th>
           <th><code class="parameter">mode</code> = &quot;rd&quot;</th>
           <th><code class="parameter">mode</code> = &quot;rdt&quot;</th>
           <th><code class="parameter">mode</code> = &quot;wd&quot;</th>
           <th><code class="parameter">mode</code> = &quot;wdt&quot;</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td>not open</td>
           <td>ok</td>
           <td>ok</td>
           <td>ok</td>
           <td>ok</td>
           <td>ok</td>
           <td>ok</td>
           <td>ok</td>
           <td>ok</td>
          </tr>

          <tr>
           <td><code class="parameter">mode</code> = &quot;rl&quot;</td>
           <td>ok</td>
           <td>ok</td>
           <td>wait</td>
           <td>false</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>illegal</td>
          </tr>

          <tr>
           <td><code class="parameter">mode</code> = &quot;wl&quot;</td>
           <td>wait</td>
           <td>false</td>
           <td>wait</td>
           <td>false</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>illegal</td>
          </tr>

          <tr>
           <td><code class="parameter">mode</code> = &quot;rd&quot;</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>ok</td>
           <td>ok</td>
           <td>wait</td>
           <td>false</td>
          </tr>

          <tr>
           <td><code class="parameter">mode</code> = &quot;wd&quot;</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>illegal</td>
           <td>wait</td>
           <td>false</td>
           <td>wait</td>
           <td>false</td>
          </tr>

         </tbody>
        
       </table>

       <ul class="simplelist">
        <li>ok: the second call will be successful.</li>
        <li>wait: the second call waits until <span class="function"><a href="function.dba-close.html" class="function">dba_close()</a></span> is called for the first.</li>
        <li>false: the second call returns false.</li>
        <li>illegal: you must not mix <code class="literal">&quot;l&quot;</code> and <code class="literal">&quot;d&quot;</code> modifiers for <code class="parameter">mode</code> parameter.</li>
       </ul>
      </p>
     </p></blockquote>
    </dd>
   
   
    <dt><code class="parameter">handler</code></dt>
    <dd>
     <span class="simpara">
      The name of the <a href="dba.requirements.html" class="link">handler</a> which
      shall be used for accessing <code class="parameter">path</code>. It is passed
      all optional parameters given to <span class="function"><strong>dba_open()</strong></span> and
      can act on behalf of them. If <code class="parameter">handler</code> is <strong><code><a href="reserved.constants.html#constant.null">null</a></code></strong>,
      then the default handler is invoked.
     </span>
    </dd>
   
   
    <dt><code class="parameter">permission</code></dt>
    <dd>
     <span class="simpara">
      Optional <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> parameter which is passed to the driver. It has the same meaning as
      the <code class="parameter">permissions</code> parameter of <span class="function"><a href="function.chmod.html" class="function">chmod()</a></span>,
      and defaults to <code class="literal">0644</code>.
     </span>
     <span class="simpara">
      The <code class="literal">db1</code>, <code class="literal">db2</code>, <code class="literal">db3</code>,
      <code class="literal">db4</code>, <code class="literal">dbm</code>, <code class="literal">gdbm</code>,
      <code class="literal">ndbm</code>, and <code class="literal">lmdb</code> drivers support the
      <code class="parameter">permission</code> parameter.
     </span>
    </dd>
   
   
    <dt><code class="parameter">map_size</code></dt>
    <dd>
     <span class="simpara">
      Optional <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> parameter which is passed to the driver. Its value should be a multiple of the
      page size of the OS, or zero, to use the default map size.
     </span>
     <span class="simpara">
      Only the <code class="literal">lmdb</code> driver accepts the <code class="parameter">map_size</code> parameter.
     </span>
    </dd>
   
   
    <dt><code class="parameter">flags</code></dt>
    <dd>
     <span class="simpara">
      Flags to pass to the database drivers. If <strong><code><a href="reserved.constants.html#constant.null">null</a></code></strong> the default flags will be provided.
      Currently, only the LMDB driver supports the following flags
      <strong><code><a href="dba.constants.html#constant.dba-lmdb-use-sub-dir">DBA_LMDB_USE_SUB_DIR</a></code></strong> and
      <strong><code><a href="dba.constants.html#constant.dba-lmdb-no-sub-dir">DBA_LMDB_NO_SUB_DIR</a></code></strong>.
     </span>
    </dd>
   
  </dl>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.dba-open-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="simpara">
   Returns a <span class="classname"><a href="class.dba-connection.html" class="classname">Dba\Connection</a></span> instance on success or <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.dba-open-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="simpara">
   <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> is returned and an <strong><code><a href="errorfunc.constants.html#constant.e-warning">E_WARNING</a></code></strong> level error is issued when
   <code class="parameter">handler</code> is <strong><code><a href="reserved.constants.html#constant.null">null</a></code></strong>, but there is no default handler.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.dba-open-changelog">
  <h3 class="title">Changelog</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Version</th>
      <th>Description</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.4.0</td>
      <td>
       Returns a <span class="classname"><a href="class.dba-connection.html" class="classname">Dba\Connection</a></span> instance now;
       previously, a <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> was returned.
      </td>
     </tr>

     <tr>
      <td>8.2.0</td>
      <td>
       <code class="parameter">flags</code> is added.
      </td>
     </tr>

     <tr>
      <td>8.2.0</td>
      <td>
       <code class="parameter">handler</code> is now nullable.
      </td>
     </tr>

     <tr>
      <td>7.3.14, 7.4.2</td>
      <td>
       The <code class="literal">lmdb</code> driver now supports an additional <code class="parameter">map_size</code>
       parameter.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 seealso" id="refsect1-function.dba-open-seealso">
  <h3 class="title">See Also</h3>
  <ul class="simplelist">
   <li><span class="function"><a href="function.dba-popen.html" class="function" rel="rdfs-seeAlso">dba_popen()</a> - Open database persistently</span></li>
   <li><span class="function"><a href="function.dba-close.html" class="function" rel="rdfs-seeAlso">dba_close()</a> - Close a DBA database</span></li>
  </ul>
 </div>

</div></div></div><script type="text/javascript" src="search-combined.js"></script><script type="text/javascript" src="js/67ae199ee27cc87120cab9ba49d1b776-FuzzySearch.min.js"></script><script type="text/javascript" src="js/f5555778cd757f2cb49676062898832b-search.js"></script>    <div id="search-modal__backdrop" class="search-modal__backdrop">
      <div
        role="dialog"
        aria-label="Search modal"
        id="search-modal"
        class="search-modal"
      >
        <div class="search-modal__header">
          <div class="search-modal__form">
            <div class="search-modal__input-icon">
              <!-- https://feathericons.com search -->
              <svg xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
                width="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
            </div>
            <input
              type="search"
              id="search-modal__input"
              class="search-modal__input"
              placeholder="Search docs"
              aria-label="Search docs"
            />
          </div>
    
          <button aria-label="Close" class="search-modal__close">
            <!-- https://pictogrammers.com/library/mdi/icon/close/ -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
              width="24"
              viewBox="0 0 24 24"
            >
              <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
            </svg>
          </button>
        </div>
        <div
          role="listbox"
          aria-label="Search results"
          id="search-modal__results"
          class="search-modal__results"
        ></div>
        <div class="search-modal__helper-text">
          <div>
            <kbd>↑</kbd> and <kbd>↓</kbd> to navigate •
            <kbd>Enter</kbd> to select •
            <kbd>Esc</kbd> to close • <kbd>/</kbd> to open
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            /*{{{Search Modal*/
            const language = 'local';
            initSearchModal();
            initPHPSearch(language).then((searchCallback) => {
                initSearchUI({language, searchCallback, limit: 30});
            });
            /*}}}*/
        });
    </script></body></html>