    <!DOCTYPE HTML>
    <html>
     <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <style>
        .navbar__local {
          flex-grow: 1;
          display: grid;
          grid-auto-flow: column;
          grid-auto-columns: 1fr min-content 1fr;
          margin: 0;
          height: 100%;
          
          .navbar__item {
            align-content: center;
          }
          .navbar__link {
            display: inline;
          }
          .search {
            text-align: center;
          }
          .next {
            text-align: right;
          }
        }
      </style>
      <title>Performance</title>
      <link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

     </head>
     <body class="docs">    <div class="navbar navbar-fixed-top">
      <div class="navbar__inner clearfix">
          <ul class="navbar__local">
            <li class="navbar__item prev"><a href="regexp.reference.recursive.html" class="navbar__link">« Recursive patterns</a></li>
            <li class="navbar__item search">
              <!-- Desktop encanced search -->
              <button
                id="navbar__search-button"
                class="navbar__search-button"
                hidden
              >
                    <svg
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden="true"
        width="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
    >
    <circle cx="11" cy="11" r="8"></circle>
    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
                Search
              </button>
            </li>
            <li class="navbar__item next"><a href="reference.pcre.pattern.modifiers.html" class="navbar__link">Possible modifiers in regex patterns »</a></li>
          </ul>
      </div>
    </div>    <div id="breadcrumbs" class="clearfix">
      <ul class="breadcrumbs-container">
        <li><a href="index.html">PHP Manual</a></li>
        <li><a href="reference.pcre.pattern.syntax.html">PCRE regex syntax</a></li>
        <li>Performance</li>
      </ul>
    </div>    <div id="layout">
      <div id="layout-content"><div id="regexp.reference.performance" class="section">
  <h2 class="title">Performance</h2>
  <p class="para">
   Certain items that may appear in patterns are more efficient
   than others. It is more efficient to use a character class
   like [aeiou] than a set of alternatives such as (a|e|i|o|u).
   In general, the simplest construction that provides the
   required behaviour is usually the most efficient. Jeffrey
   Friedl&#039;s book contains a lot of discussion about optimizing
   regular expressions for efficient performance.
  </p>
  <p class="para">
   When a pattern begins with .* and the <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE_DOTALL</a> option is
   set, the pattern is implicitly anchored by PCRE, since it
   can match only at the start of a subject string. However, if
   <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE_DOTALL</a>
   is not set, PCRE cannot make this optimization,
   because the . metacharacter does not then match a newline,
   and if the subject string contains newlines, the pattern may
   match from the character immediately following one of them
   instead of from the very start. For example, the pattern

   <code class="literal">(.*) second</code>

   matches the subject &quot;first\nand second&quot; (where \n stands for
   a newline character) with the first captured substring being
   &quot;and&quot;. In order to do this, PCRE has to retry the match
   starting after every newline in the subject.
  </p>
  <p class="para">
   If you are using such a pattern with subject strings that do
   not contain newlines, the best performance is obtained by
   setting <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE_DOTALL</a>,
   or starting the pattern with ^.* to
   indicate explicit anchoring. That saves PCRE from having to
   scan along the subject looking for a newline to restart at.
  </p>
  <p class="para">
   Beware of patterns that contain nested indefinite repeats.
   These can take a long time to run when applied to a string
   that does not match. Consider the pattern fragment

   <code class="literal">(a+)*</code>
  </p>
  <p class="para">
   This can match &quot;aaaa&quot; in 33 different ways, and this number
   increases very rapidly as the string gets longer. (The *
   repeat can match 0, 1, 2, 3, or 4 times, and for each of
   those cases other than 0, the + repeats can match different
   numbers of times.) When the remainder of the pattern is such
   that the entire match is going to fail, PCRE has in principle
   to try every possible variation, and this can take an
   extremely long time.
  </p>
  <p class="para">
   An optimization catches some of the more simple cases such
   as

   <code class="literal">(a+)*b</code>

   where a literal character follows. Before embarking on the
   standard matching procedure, PCRE checks that there is a &quot;b&quot;
   later in the subject string, and if there is not, it fails
   the match immediately. However, when there is no following
   literal this optimization cannot be used. You can see the
   difference by comparing the behaviour of

   <code class="literal">(a+)*\d</code>

   with the pattern above. The former gives a failure almost
   instantly when applied to a whole line of &quot;a&quot; characters,
   whereas the latter takes an appreciable time with strings
   longer than about 20 characters.
  </p>
 </div></div></div><script type="text/javascript" src="search-combined.js"></script><script type="text/javascript" src="js/67ae199ee27cc87120cab9ba49d1b776-FuzzySearch.min.js"></script><script type="text/javascript" src="js/f5555778cd757f2cb49676062898832b-search.js"></script>    <div id="search-modal__backdrop" class="search-modal__backdrop">
      <div
        role="dialog"
        aria-label="Search modal"
        id="search-modal"
        class="search-modal"
      >
        <div class="search-modal__header">
          <div class="search-modal__form">
            <div class="search-modal__input-icon">
              <!-- https://feathericons.com search -->
              <svg xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
                width="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
            </div>
            <input
              type="search"
              id="search-modal__input"
              class="search-modal__input"
              placeholder="Search docs"
              aria-label="Search docs"
            />
          </div>
    
          <button aria-label="Close" class="search-modal__close">
            <!-- https://pictogrammers.com/library/mdi/icon/close/ -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
              width="24"
              viewBox="0 0 24 24"
            >
              <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
            </svg>
          </button>
        </div>
        <div
          role="listbox"
          aria-label="Search results"
          id="search-modal__results"
          class="search-modal__results"
        ></div>
        <div class="search-modal__helper-text">
          <div>
            <kbd>↑</kbd> and <kbd>↓</kbd> to navigate •
            <kbd>Enter</kbd> to select •
            <kbd>Esc</kbd> to close • <kbd>/</kbd> to open
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            /*{{{Search Modal*/
            const language = 'local';
            initSearchModal();
            initPHPSearch(language).then((searchCallback) => {
                initSearchUI({language, searchCallback, limit: 30});
            });
            /*}}}*/
        });
    </script></body></html>