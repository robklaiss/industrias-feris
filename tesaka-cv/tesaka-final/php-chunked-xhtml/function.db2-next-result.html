    <!DOCTYPE HTML>
    <html>
     <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <style>
        .navbar__local {
          flex-grow: 1;
          display: grid;
          grid-auto-flow: column;
          grid-auto-columns: 1fr min-content 1fr;
          margin: 0;
          height: 100%;
          
          .navbar__item {
            align-content: center;
          }
          .navbar__link {
            display: inline;
          }
          .search {
            text-align: center;
          }
          .next {
            text-align: right;
          }
        }
      </style>
      <title>Requests the next result set from a stored procedure</title>
      <link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

     </head>
     <body class="docs">    <div class="navbar navbar-fixed-top">
      <div class="navbar__inner clearfix">
          <ul class="navbar__local">
            <li class="navbar__item prev"><a href="function.db2-lob-read.html" class="navbar__link">« db2_lob_read</a></li>
            <li class="navbar__item search">
              <!-- Desktop encanced search -->
              <button
                id="navbar__search-button"
                class="navbar__search-button"
                hidden
              >
                    <svg
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden="true"
        width="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
    >
    <circle cx="11" cy="11" r="8"></circle>
    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
                Search
              </button>
            </li>
            <li class="navbar__item next"><a href="function.db2-num-fields.html" class="navbar__link">db2_num_fields »</a></li>
          </ul>
      </div>
    </div>    <div id="breadcrumbs" class="clearfix">
      <ul class="breadcrumbs-container">
        <li><a href="index.html">PHP Manual</a></li>
        <li><a href="ref.ibm-db2.html">IBM DB2 Functions</a></li>
        <li>Requests the next result set from a stored procedure</li>
      </ul>
    </div>    <div id="layout">
      <div id="layout-content"><div id="function.db2-next-result" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">db2_next_result</h1>
  <p class="verinfo">(PECL ibm_db2 &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">db2_next_result</span> &mdash; <span class="dc-title">
   Requests the next result set from a stored procedure
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.db2-next-result-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>db2_next_result</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> <code class="parameter">$stmt</code></span>): <span class="type"><span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span>|<span class="type"><a href="language.types.singleton.html" class="type false">false</a></span></span></div>



  <p class="simpara">
   A stored procedure can return zero or more result sets. While you handle
   the first result set in exactly the same way you would handle the results
   returned by a simple SELECT statement, to fetch the second and subsequent
   result sets from a stored procedure you must call the
   <span class="function"><strong>db2_next_result()</strong></span> function and return the result to a
   uniquely named PHP variable.
  </p>

 </div>

 <div class="refsect1 parameters" id="refsect1-function.db2-next-result-parameters">
  <h3 class="title">Parameters</h3>
  <dl>
   
    <dt><code class="parameter">stmt</code></dt>
    <dd>
     <span class="simpara">
      A prepared statement returned from <span class="function"><a href="function.db2-exec.html" class="function">db2_exec()</a></span> or
      <span class="function"><a href="function.db2-execute.html" class="function">db2_execute()</a></span>.
     </span>
    </dd>
   
  </dl>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.db2-next-result-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="simpara">
   Returns a new statement resource containing the next result set if the
   stored procedure returned another result set. Returns <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> if the stored
   procedure did not return another result set.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.db2-next-result-examples">
  <h3 class="title">Examples</h3>
  <div class="example" id="example-1">
   <p><strong>Example #1 Calling a stored procedure that returns multiple result sets</strong></p>
   <div class="example-contents"><p>
    In the following example, we call a stored procedure that returns three
    result sets. The first result set is fetched directly from the same
    statement resource on which we invoked the CALL statement, while the
    second and third result sets are fetched from statement resources
    returned from our calls to the <span class="function"><strong>db2_next_result()</strong></span>
    function.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$conn </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">, </span><span style="color: #0000BB">$user</span><span style="color: #007700">, </span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br /><br />if (</span><span style="color: #0000BB">$conn</span><span style="color: #007700">) {<br />  </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">'CALL multiResults()'</span><span style="color: #007700">);<br /><br />  print </span><span style="color: #DD0000">"Fetching first result set\n"</span><span style="color: #007700">;<br />  while (</span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">)) {<br />    </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br />  }<br /><br />  print </span><span style="color: #DD0000">"\nFetching second result set\n"</span><span style="color: #007700">;<br />  </span><span style="color: #0000BB">$res </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_next_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);<br />  if (</span><span style="color: #0000BB">$res</span><span style="color: #007700">) {<br />    while (</span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">)) {<br />      </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br />    }<br />  }<br /><br />  print </span><span style="color: #DD0000">"\nFetching third result set\n"</span><span style="color: #007700">;<br />  </span><span style="color: #0000BB">$res2 </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_next_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);<br />  if (</span><span style="color: #0000BB">$res2</span><span style="color: #007700">) {<br />    while (</span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$res2</span><span style="color: #007700">)) {<br />      </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br />    }<br />  }<br /><br />  </span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <div class="example-contents"><p>The above example will output:</p></div>
   <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">Fetching first result set
array(2) {
  [0]=&gt;
  string(16) &quot;Bubbles         &quot;
  [1]=&gt;
  int(3)
}
array(2) {
  [0]=&gt;
  string(16) &quot;Gizmo           &quot;
  [1]=&gt;
  int(4)
}

Fetching second result set
array(4) {
  [0]=&gt;
  string(16) &quot;Sweater         &quot;
  [1]=&gt;
  int(6)
  [2]=&gt;
  string(5) &quot;llama&quot;
  [3]=&gt;
  string(6) &quot;150.00&quot;
}
array(4) {
  [0]=&gt;
  string(16) &quot;Smarty          &quot;
  [1]=&gt;
  int(2)
  [2]=&gt;
  string(5) &quot;horse&quot;
  [3]=&gt;
  string(6) &quot;350.00&quot;
}

Fetching third result set
array(1) {
  [0]=&gt;
  string(16) &quot;Bubbles         &quot;
}
array(1) {
  [0]=&gt;
  string(16) &quot;Gizmo           &quot;
}</pre>
</div>
   </div>
  </div>
 </div>



 


</div></div></div><script type="text/javascript" src="search-combined.js"></script><script type="text/javascript" src="js/67ae199ee27cc87120cab9ba49d1b776-FuzzySearch.min.js"></script><script type="text/javascript" src="js/f5555778cd757f2cb49676062898832b-search.js"></script>    <div id="search-modal__backdrop" class="search-modal__backdrop">
      <div
        role="dialog"
        aria-label="Search modal"
        id="search-modal"
        class="search-modal"
      >
        <div class="search-modal__header">
          <div class="search-modal__form">
            <div class="search-modal__input-icon">
              <!-- https://feathericons.com search -->
              <svg xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
                width="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
            </div>
            <input
              type="search"
              id="search-modal__input"
              class="search-modal__input"
              placeholder="Search docs"
              aria-label="Search docs"
            />
          </div>
    
          <button aria-label="Close" class="search-modal__close">
            <!-- https://pictogrammers.com/library/mdi/icon/close/ -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
              width="24"
              viewBox="0 0 24 24"
            >
              <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
            </svg>
          </button>
        </div>
        <div
          role="listbox"
          aria-label="Search results"
          id="search-modal__results"
          class="search-modal__results"
        ></div>
        <div class="search-modal__helper-text">
          <div>
            <kbd>↑</kbd> and <kbd>↓</kbd> to navigate •
            <kbd>Enter</kbd> to select •
            <kbd>Esc</kbd> to close • <kbd>/</kbd> to open
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            /*{{{Search Modal*/
            const language = 'local';
            initSearchModal();
            initPHPSearch(language).then((searchCallback) => {
                initSearchUI({language, searchCallback, limit: 30});
            });
            /*}}}*/
        });
    </script></body></html>