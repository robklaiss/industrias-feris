    <!DOCTYPE HTML>
    <html>
     <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <style>
        .navbar__local {
          flex-grow: 1;
          display: grid;
          grid-auto-flow: column;
          grid-auto-columns: 1fr min-content 1fr;
          margin: 0;
          height: 100%;
          
          .navbar__item {
            align-content: center;
          }
          .navbar__link {
            display: inline;
          }
          .search {
            text-align: center;
          }
          .next {
            text-align: right;
          }
        }
      </style>
      <title>Conditional subpatterns</title>
      <link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

     </head>
     <body class="docs">    <div class="navbar navbar-fixed-top">
      <div class="navbar__inner clearfix">
          <ul class="navbar__local">
            <li class="navbar__item prev"><a href="regexp.reference.onlyonce.html" class="navbar__link">« Once-only subpatterns</a></li>
            <li class="navbar__item search">
              <!-- Desktop encanced search -->
              <button
                id="navbar__search-button"
                class="navbar__search-button"
                hidden
              >
                    <svg
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden="true"
        width="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
    >
    <circle cx="11" cy="11" r="8"></circle>
    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
                Search
              </button>
            </li>
            <li class="navbar__item next"><a href="regexp.reference.comments.html" class="navbar__link">Comments »</a></li>
          </ul>
      </div>
    </div>    <div id="breadcrumbs" class="clearfix">
      <ul class="breadcrumbs-container">
        <li><a href="index.html">PHP Manual</a></li>
        <li><a href="reference.pcre.pattern.syntax.html">PCRE regex syntax</a></li>
        <li>Conditional subpatterns</li>
      </ul>
    </div>    <div id="layout">
      <div id="layout-content"><div id="regexp.reference.conditional" class="section">
  <h2 class="title">Conditional subpatterns</h2>
  <p class="para">
   It is possible to cause the matching process to obey a subpattern
   conditionally or to choose between two alternative
   subpatterns, depending on the result of an assertion, or
   whether a previous capturing subpattern matched or not. The
   two possible forms of conditional subpattern are
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="annotation-interactive cdata"><pre>
(?(condition)yes-pattern)
(?(condition)yes-pattern|no-pattern)
</pre></div>
   </div>

  </div>
  <p class="para">
   If the condition is satisfied, the yes-pattern is used; otherwise
   the no-pattern (if present) is used. If there are
   more than two alternatives in the subpattern, a compile-time
   error occurs.
  </p>
  <p class="para">
   There are two kinds of condition. If the text between the
   parentheses consists of a sequence of digits, then the
   condition is satisfied if the capturing subpattern of that
   number has previously matched. Consider the following pattern,
   which contains non-significant white space to make it
   more readable (assume the <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE_EXTENDED</a>
   option) and to divide it into three parts for ease of discussion:
  </p>
  <div class="informalexample">
   <div class="example-contents">
<div class="annotation-interactive cdata"><pre>
( \( )? [^()]+ (?(1) \) )
</pre></div>
   </div>

  </div>
  <p class="para">
   The first part matches an optional opening parenthesis, and
   if that character is present, sets it as the first captured
   substring. The second part matches one or more characters
   that are not parentheses. The third part is a conditional
   subpattern that tests whether the first set of parentheses
   matched or not. If they did, that is, if subject started
   with an opening parenthesis, the condition is <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong>, and so
   the yes-pattern is executed and a closing parenthesis is
   required. Otherwise, since no-pattern is not present, the
   subpattern matches nothing. In other words, this pattern
   matches a sequence of non-parentheses, optionally enclosed
   in parentheses.
  </p>
  <p class="para">
   If the condition is the string <code class="literal">(R)</code>, it is satisfied if
   a recursive call to the pattern or subpattern has been made. At &quot;top
   level&quot;, the condition is false.
  </p>
  <p class="para">
   If the condition is not a sequence of digits or (R), it must be an
   assertion. This may be a positive or negative lookahead or
   lookbehind assertion. Consider this pattern, again containing
   non-significant white space, and with the two alternatives on
   the second line:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="annotation-interactive cdata"><pre>
(?(?=[^a-z]*[a-z])
\d{2}-[a-z]{3}-\d{2} | \d{2}-\d{2}-\d{2} )
</pre></div>
   </div>

  </div>
  <p class="para">
   The condition is a positive lookahead assertion that matches
   an optional sequence of non-letters followed by a letter. In
   other words, it tests for the presence of at least one
   letter in the subject. If a letter is found, the subject is
   matched against the first alternative; otherwise it is
   matched against the second. This pattern matches strings in
   one of the two forms dd-aaa-dd or dd-dd-dd, where aaa are
   letters and dd are digits.
  </p>
 </div></div></div><script type="text/javascript" src="search-combined.js"></script><script type="text/javascript" src="js/67ae199ee27cc87120cab9ba49d1b776-FuzzySearch.min.js"></script><script type="text/javascript" src="js/f5555778cd757f2cb49676062898832b-search.js"></script>    <div id="search-modal__backdrop" class="search-modal__backdrop">
      <div
        role="dialog"
        aria-label="Search modal"
        id="search-modal"
        class="search-modal"
      >
        <div class="search-modal__header">
          <div class="search-modal__form">
            <div class="search-modal__input-icon">
              <!-- https://feathericons.com search -->
              <svg xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
                width="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
            </div>
            <input
              type="search"
              id="search-modal__input"
              class="search-modal__input"
              placeholder="Search docs"
              aria-label="Search docs"
            />
          </div>
    
          <button aria-label="Close" class="search-modal__close">
            <!-- https://pictogrammers.com/library/mdi/icon/close/ -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
              width="24"
              viewBox="0 0 24 24"
            >
              <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
            </svg>
          </button>
        </div>
        <div
          role="listbox"
          aria-label="Search results"
          id="search-modal__results"
          class="search-modal__results"
        ></div>
        <div class="search-modal__helper-text">
          <div>
            <kbd>↑</kbd> and <kbd>↓</kbd> to navigate •
            <kbd>Enter</kbd> to select •
            <kbd>Esc</kbd> to close • <kbd>/</kbd> to open
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            /*{{{Search Modal*/
            const language = 'local';
            initSearchModal();
            initPHPSearch(language).then((searchCallback) => {
                initSearchUI({language, searchCallback, limit: 30});
            });
            /*}}}*/
        });
    </script></body></html>