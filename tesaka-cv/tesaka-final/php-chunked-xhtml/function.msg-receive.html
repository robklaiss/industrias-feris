    <!DOCTYPE HTML>
    <html>
     <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <style>
        .navbar__local {
          flex-grow: 1;
          display: grid;
          grid-auto-flow: column;
          grid-auto-columns: 1fr min-content 1fr;
          margin: 0;
          height: 100%;
          
          .navbar__item {
            align-content: center;
          }
          .navbar__link {
            display: inline;
          }
          .search {
            text-align: center;
          }
          .next {
            text-align: right;
          }
        }
      </style>
      <title>Receive a message from a message queue</title>
      <link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

     </head>
     <body class="docs">    <div class="navbar navbar-fixed-top">
      <div class="navbar__inner clearfix">
          <ul class="navbar__local">
            <li class="navbar__item prev"><a href="function.msg-queue-exists.html" class="navbar__link">« msg_queue_exists</a></li>
            <li class="navbar__item search">
              <!-- Desktop encanced search -->
              <button
                id="navbar__search-button"
                class="navbar__search-button"
                hidden
              >
                    <svg
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden="true"
        width="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
    >
    <circle cx="11" cy="11" r="8"></circle>
    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
                Search
              </button>
            </li>
            <li class="navbar__item next"><a href="function.msg-remove-queue.html" class="navbar__link">msg_remove_queue »</a></li>
          </ul>
      </div>
    </div>    <div id="breadcrumbs" class="clearfix">
      <ul class="breadcrumbs-container">
        <li><a href="index.html">PHP Manual</a></li>
        <li><a href="ref.sem.html">Semaphore Functions</a></li>
        <li>Receive a message from a message queue</li>
      </ul>
    </div>    <div id="layout">
      <div id="layout-content"><div id="function.msg-receive" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">msg_receive</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">msg_receive</span> &mdash; <span class="dc-title">Receive a message from a message queue</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.msg-receive-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>msg_receive</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="class.sysvmessagequeue.html" class="type SysvMessageQueue">SysvMessageQueue</a></span> <code class="parameter">$queue</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$desired_message_type</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter reference">&$received_message_type</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$max_message_size</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter reference">&$message</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span> <code class="parameter">$unserialize</code><span class="initializer"> = <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter reference">&$error_code</code><span class="initializer"> = <strong><code><a href="reserved.constants.html#constant.null">null</a></code></strong></span></span><br>): <span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>msg_receive()</strong></span> will receive the first message from the
   specified <code class="parameter">queue</code> of the type specified by
   <code class="parameter">desired_message_type</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.msg-receive-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>
    
     <dt><code class="parameter">queue</code></dt>
     <dd>
      <p class="para">
       The message queue.
      </p>
     </dd>
    
    
     <dt><code class="parameter">desired_message_type</code></dt>
     <dd>
      <p class="para">
       If <code class="parameter">desired_message_type</code> is 0, the message from the front
       of the queue is returned. If <code class="parameter">desired_message_type</code> is
       greater than 0, then the first message of that type is returned.
       If <code class="parameter">desired_message_type</code> is less than 0, the first
       message on the queue with a type less than or equal to the
       absolute value of <code class="parameter">desired_message_type</code> will be read.
       If no messages match the criteria, your script will wait until a suitable
       message arrives on the queue.  You can prevent the script from blocking
       by specifying <strong><code><a href="sem.constants.html#constant.msg-ipc-nowait">MSG_IPC_NOWAIT</a></code></strong> in the
       <code class="parameter">flags</code> parameter.
      </p>
     </dd>
    
    
     <dt><code class="parameter">received_message_type</code></dt>
     <dd>
      <p class="para">
       The type of the message that was received will be stored in this
       parameter.
      </p>
     </dd>
    
    
     <dt><code class="parameter">max_message_size</code></dt>
     <dd>
      <p class="para">
       The maximum size of message to be accepted is specified by the
       <code class="parameter">max_message_size</code>; if the message in the queue is larger
       than this size the function will fail (unless you set
       <code class="parameter">flags</code> as described below).
      </p>
     </dd>
    
    
     <dt><code class="parameter">message</code></dt>
     <dd>
      <p class="para">
       The received message will be stored in <code class="parameter">message</code>,
       unless there were errors receiving the message.
      </p>
     </dd>
    
    
     <dt><code class="parameter">unserialize</code></dt>
     <dd>
      <p class="para">
       If set to
       <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong>, the message is treated as though it was serialized using the
       same mechanism as the session module. The message will be unserialized
       and then returned to your script. This allows you to easily receive
       arrays or complex object structures from other PHP scripts, or if you
       are using the WDDX serializer, from any WDDX compatible source.
      </p>
      <p class="para">
       If <code class="parameter">unserialize</code> is <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong>, the message will be
       returned as a binary-safe string.
      </p>
     </dd>
    
    
     <dt><code class="parameter">flags</code></dt>
     <dd>
      <p class="para">
       The optional <code class="parameter">flags</code> allows you to pass flags to the
       low-level msgrcv system call.  It defaults to 0, but you may specify one
       or more of the following values (by adding or ORing them together).
       <table class="doctable table">
        <caption><strong>Flag values for msg_receive</strong></caption>
        
         <tbody class="tbody">
          <tr>
           <td><strong><code><a href="sem.constants.html#constant.msg-ipc-nowait">MSG_IPC_NOWAIT</a></code></strong></td>
           <td>If there are no messages of the
            <code class="parameter">desired_message_type</code>, return immediately and do not
            wait.  The function will fail and return an integer value
            corresponding to <strong><code><a href="sem.constants.html#constant.msg-enomsg">MSG_ENOMSG</a></code></strong>.
           </td>
          </tr>

          <tr>
           <td><strong><code><a href="sem.constants.html#constant.msg-except">MSG_EXCEPT</a></code></strong></td>
           <td>Using this flag in combination with a
            <code class="parameter">desired_message_type</code> greater than 0 will cause the
            function to receive the first message that is not equal to
            <code class="parameter">desired_message_type</code>.</td>
          </tr>

          <tr>
           <td><strong><code><a href="sem.constants.html#constant.msg-noerror">MSG_NOERROR</a></code></strong></td>
           <td>
            If the message is longer than <code class="parameter">max_message_size</code>,
            setting this flag will truncate the message to
            <code class="parameter">max_message_size</code> and will not signal an error.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>
    
    
     <dt><code class="parameter">error_code</code></dt>
     <dd>
      <p class="para">
       If the function fails, the optional <code class="parameter">error_code</code>
       will be set to the value of the system errno variable.
      </p>
     </dd>
    
   </dl>
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.msg-receive-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong> on success or <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> on failure.
  </p>
  <p class="para">
   Upon successful completion the message queue data structure is updated as
   follows: <code class="literal">msg_lrpid</code> is set to the process-ID of the
   calling process, <code class="literal">msg_qnum</code> is decremented by 1 and
   <code class="literal">msg_rtime</code> is set to the current time.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.msg-receive-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>8.0.0</td>
       <td>
        <code class="parameter">queue</code> expects a <span class="classname"><a href="class.sysvmessagequeue.html" class="classname">SysvMessageQueue</a></span>
        instance now; previously, a <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> was expected.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.msg-receive-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li><span class="function"><a href="function.msg-remove-queue.html" class="function" rel="rdfs-seeAlso">msg_remove_queue()</a> - Destroy a message queue</span></li>
    <li><span class="function"><a href="function.msg-send.html" class="function" rel="rdfs-seeAlso">msg_send()</a> - Send a message to a message queue</span></li>
    <li><span class="function"><a href="function.msg-stat-queue.html" class="function" rel="rdfs-seeAlso">msg_stat_queue()</a> - Returns information from the message queue data structure</span></li>
    <li><span class="function"><a href="function.msg-set-queue.html" class="function" rel="rdfs-seeAlso">msg_set_queue()</a> - Set information in the message queue data structure</span></li>
   </ul>
  </p>
 </div>
  

</div></div></div><script type="text/javascript" src="search-combined.js"></script><script type="text/javascript" src="js/67ae199ee27cc87120cab9ba49d1b776-FuzzySearch.min.js"></script><script type="text/javascript" src="js/f5555778cd757f2cb49676062898832b-search.js"></script>    <div id="search-modal__backdrop" class="search-modal__backdrop">
      <div
        role="dialog"
        aria-label="Search modal"
        id="search-modal"
        class="search-modal"
      >
        <div class="search-modal__header">
          <div class="search-modal__form">
            <div class="search-modal__input-icon">
              <!-- https://feathericons.com search -->
              <svg xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
                width="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
            </div>
            <input
              type="search"
              id="search-modal__input"
              class="search-modal__input"
              placeholder="Search docs"
              aria-label="Search docs"
            />
          </div>
    
          <button aria-label="Close" class="search-modal__close">
            <!-- https://pictogrammers.com/library/mdi/icon/close/ -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
              width="24"
              viewBox="0 0 24 24"
            >
              <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
            </svg>
          </button>
        </div>
        <div
          role="listbox"
          aria-label="Search results"
          id="search-modal__results"
          class="search-modal__results"
        ></div>
        <div class="search-modal__helper-text">
          <div>
            <kbd>↑</kbd> and <kbd>↓</kbd> to navigate •
            <kbd>Enter</kbd> to select •
            <kbd>Esc</kbd> to close • <kbd>/</kbd> to open
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            /*{{{Search Modal*/
            const language = 'local';
            initSearchModal();
            initPHPSearch(language).then((searchCallback) => {
                initSearchUI({language, searchCallback, limit: 30});
            });
            /*}}}*/
        });
    </script></body></html>